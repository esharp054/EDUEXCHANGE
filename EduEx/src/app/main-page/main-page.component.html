<div class="container">
  <div class="row">
    <main-navbar></main-navbar>
  </div>
  <div class="row">
    <div class="main" id="main">
      <div class="main-wrap">
        <!--<nav class="navbar navbar-default" id="navbar">
      <a class="navbar-brand" href="#">
        <img id="logo" src="/assets/long_logo.png" class="img-responsive">
      </a>

      <div class="container" id="container">
        <div class="navbar-header navbar-right">
          <a class="navbar-brand navbar-right" href="#">
            <img id="user" src="img/cow.jpg" class="img-responsive">
          </a>-->
        <!-- <div id="nav-collapse" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                     <li class="inactive" ><a href="#" class="anchor" id="sell">Sell</a></li>
                     <li class="inactive"><a href="#" class="anchor"  id="ellipse">...</a></li>
                    </ul>
                   </div> -->
        <!--</div>
      </div>
    </nav>-->
        <div class="main-body" id="mainOuter">
          <div class="container">
            <div class="row top-buffer">
              <div class="col-md-6 col-md-offset-3 col-sm-11">
                <div id="custom-search-input">
                  <div class="input-group col-md-12">
                    <input type="text" [(ngModel)]="_searchTerm" class="form-control input-lg" placeholder="Search Listings" />
                    <span class="input-group-btn">
                                    <button class="btn btn-info btn-lg" type="button" (click)="search()">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </button>
                                </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <h3 class="listing-heading" id="listing" align="center">Newest Listings</h3>
            </div>
          </div>

          <div class="container-fluid">
            <!--<div class="row">
          <div class="col-md-2 col-sm-offset-1 col-sm-3" *ngFor="let item of items">
            <div class="media-center">
              <a href="#">
                <img class="img-responsive" [src]="item.imagePath">
              </a>
            </div>
            <div class="media-body">
              <h4 class="media-heading">{{item.itemName}} (${{item.price}})</h4>
            </div>
          </div>
        </div>-->
            <div class="row">
              <div class="col-xs-6 col-md-3" *ngFor="let item of listings; let i=index">
                <div class="thumbnail" id="thumbnail" *ngIf="i<4">
                  <img id="thumbImg" class="img-responsive" src="{{ item.cover || 'http://placehold.it/125x150' }}" alt="...">
                  <div class="caption" id="caption">
                    <h3 id="thumbTitle">{{item.title}}</h3>
                    <strong id="priceTag">Price:  </strong>
                    <p id="price">${{item.price}}</p><br>
                    <strong id="classTag">Class: </strong>
                    <p id="class">{{item.class || 'None'}}</p><br>
                    <!--<strong id="descTag">Description: </strong>
                    <p id="desc">{{item.description || 'None'}}</p>-->
                    <button id="thumbButton" type="button" class="btn btn-default" (click)="moreInfo(item)">More Information</button>
                    <!--<button type="button" class="btn btn-default" data-dismiss="modal" (click)="modal.dismiss()">Cancel</button>-->

                    <!-- More Info Modal-->
                    <modal *ngIf="item" [animation]="animationsEnabled" (onClose)="onClose($event)" #mainModal>
                      <modal-header [show-close]="true">
                        <h4 class="modal-title">{{curListing.title}}</h4>
                      </modal-header>
                      <modal-body>
                        <div class="media">
                          <span class="media-left" id="imageMedia">
                            <img class="d-flex mr-3" id="listingImage" src="{{ curListing.cover || 'http://placehold.it/125x150' }}" alt="{{ item.title }}" />
                          </span>
                          <div class="media-body" id="mediaHeader">
                            <strong> Price: </strong> ${{ curListing.price }}
                            <br>
                            <strong>Class: </strong> {{ curListing.class }}
                            <br>
                            <strong>Upload Date: </strong> {{ curListing.upload_date | date}}
                            <br>
                            <strong>Description: </strong> <br>{{ curListing.description }}
                          </div>
                          <a href="#userCol" data-toggle="collapse" id="userInfo" aria-expanded="false">
                            <p> View Contact Information
                              <span id="chevDown" class="glyphicon glyphicon-chevron-down"></span><span id="chevUp" class="glyphicon glyphicon-chevron-up"></span></p>
                          </a>
                          <div id="userCol" class="panel-collapse collapse" aria-expanded="false">
                            <br>
                            <hr>
                            <div class="media" *ngIf="uploader">
                              <span class="media-left" id="imageMedia">
                                  <img class="d-flex mr-3" id="listingImage" src="{{ uploader.avatar || '/assets/default_user.png'}}" alt="{{ uploader.username }}" />
                                </span>
                              <div class="media-body" id="mediaHeader">
                                <h4 class="media-heading ">
                                  Username: {{ uploader.username }} </h4>
                                <br> Email: {{ uploader.email }}
                                <br> Phone: {{ uploader.phone }}
                                <br> Joined: {{ uploader.joined_date | date }}
                              </div>
                            </div>
                            <div class="well" *ngIf="!uploader"> There is no user associated with this listing.
                            </div>
                          </div>
                          <!--</a>-->
                        </div>
                      </modal-body>
                      <modal-footer>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="sendEmail(textbook)">Send Email</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="close()">Close</button>
                      </modal-footer>
                    </modal>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="listings.length === 0">
              <div class="well" id="searchWell">There are currently no listings</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>